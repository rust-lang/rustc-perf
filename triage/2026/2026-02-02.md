# 2026-02-02 Triage Log

Overall a positive week for instruction counts (~1% improvement on
check/debug/opt/doc builds). Cycle counts and memory usage remain broadly
unchanged across the week though.

Triage done by **@simulacrum**.
Revision range: [ebf13cca..a60d12cb](https://perf.rust-lang.org/?start=ebf13cca58b551b83133d4895e123f7d1e795111&end=a60d12cbccfbeaf153f3cecb90454aa696ea4b3b&absolute=false&stat=instructions%3Au)

**Summary**:

| (instructions:u)                   | mean  | range           | count |
|:----------------------------------:|:-----:|:---------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 2.7%  | [0.3%, 7.3%]    | 3     |
| Regressions ❌ <br /> (secondary)  | 3.2%  | [0.3%, 6.0%]    | 2     |
| Improvements ✅ <br /> (primary)   | -1.2% | [-3.2%, -0.2%]  | 243   |
| Improvements ✅ <br /> (secondary) | -1.4% | [-10.2%, -0.2%] | 301   |
| All ❌✅ (primary)                 | -1.2% | [-3.2%, 7.3%]   | 246   |

0 Regression, 6 Improvements, 3 Mixed; 3 of them in rollups
33 artifact comparisons made in total

#### Regressions

No regressions this week.

#### Improvements

Rollup of 8 pull requests [#151835](https://github.com/rust-lang/rust/pull/151835) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=370143facfb348ad3b29749c0393402d76b280c3&end=842bd5be253e17831e318fdbd9d01d716557cc75&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | -     | -              | 0     |
| Regressions ❌ <br /> (secondary)  | -     | -              | 0     |
| Improvements ✅ <br /> (primary)   | -0.2% | [-0.3%, -0.2%] | 4     |
| Improvements ✅ <br /> (secondary) | -0.7% | [-1.1%, -0.2%] | 6     |
| All ❌✅ (primary)                 | -0.2% | [-0.3%, -0.2%] | 4     |

Small improvement on a number of benchmarks for non-incremental builds, likely
due to [#147387](https://github.com/rust-lang/rust/pull/147387) which tweaked
how `hir_owner_parent` interacts with the query system.

Pass `DepNode` by reference more places [#151881](https://github.com/rust-lang/rust/pull/151881) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=1e9be1b77fe89d9757d6179973b2fc970c6e83b7&end=271951ba187953d39b1c66b062d83f558aa23856&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | -     | -              | 0     |
| Regressions ❌ <br /> (secondary)  | -     | -              | 0     |
| Improvements ✅ <br /> (primary)   | -0.3% | [-0.4%, -0.2%] | 45    |
| Improvements ✅ <br /> (secondary) | -0.3% | [-0.3%, -0.2%] | 17    |
| All ❌✅ (primary)                 | -0.3% | [-0.4%, -0.2%] | 45    |


resolve: Use `IdentKey` in `resolve_ident_in_scope_set` [#151820](https://github.com/rust-lang/rust/pull/151820) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=a60d12cbccfbeaf153f3cecb90454aa696ea4b3b&end=f60a0f1bcc5a2a6dd8eb2d2021da79b40f5fbae9&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | -     | -              | 0     |
| Regressions ❌ <br /> (secondary)  | -     | -              | 0     |
| Improvements ✅ <br /> (primary)   | -0.3% | [-0.3%, -0.2%] | 8     |
| Improvements ✅ <br /> (secondary) | -0.4% | [-0.9%, -0.1%] | 22    |
| All ❌✅ (primary)                 | -0.3% | [-0.3%, -0.2%] | 8     |

resolve: Replace `Macros20NormalizedIdent` with `IdentKey` [#151550](https://github.com/rust-lang/rust/pull/151550) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=1e5065a4d99e0e3ccf1a1719055308e7a20e8f36&end=de6d33c033441c5880b863f94d7a3ec8cad141bd&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | -     | -              | 0     |
| Regressions ❌ <br /> (secondary)  | 0.0%  | [0.0%, 0.0%]   | 3     |
| Improvements ✅ <br /> (primary)   | -0.3% | [-0.5%, -0.1%] | 69    |
| Improvements ✅ <br /> (secondary) | -0.5% | [-1.7%, -0.0%] | 37    |
| All ❌✅ (primary)                 | -0.3% | [-0.5%, -0.1%] | 69    |

Regressions in include-blob look likely to be just noise.

Tweak `VecCache` to improve performance [#138405](https://github.com/rust-lang/rust/pull/138405) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=8340622e14324d0090a6edf42fce44fea3d7824f&end=57d2fb136650d05efb3ed3ea33b330bfc85844d5&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | -     | -              | 0     |
| Regressions ❌ <br /> (secondary)  | 0.1%  | [0.0%, 0.2%]   | 3     |
| Improvements ✅ <br /> (primary)   | -0.4% | [-1.2%, -0.2%] | 126   |
| Improvements ✅ <br /> (secondary) | -0.5% | [-1.3%, -0.0%] | 93    |
| All ❌✅ (primary)                 | -0.4% | [-1.2%, -0.2%] | 126   |

Regressions in include-blob look likely to be just noise.

Rollup of 5 pull requests [#151816](https://github.com/rust-lang/rust/pull/151816) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=80b898258da78fdd1262438126aa0cf90e395f0c&end=370143facfb348ad3b29749c0393402d76b280c3&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 0.3%  | [0.3%, 0.3%]   | 2     |
| Regressions ❌ <br /> (secondary)  | 0.5%  | [0.5%, 0.5%]   | 1     |
| Improvements ✅ <br /> (primary)   | -0.3% | [-0.7%, -0.2%] | 9     |
| Improvements ✅ <br /> (secondary) | -0.4% | [-0.7%, -0.1%] | 22    |
| All ❌✅ (primary)                 | -0.2% | [-0.7%, 0.3%]  | 11    |

[Doc builds improved, likely due to the portable SIMD subtree update](https://github.com/rust-lang/rust/pull/151775#issuecomment-3821741947)

Regressions are (new) noise in typenum.

#### Mixed

Rollup of 4 pull requests [#151749](https://github.com/rust-lang/rust/pull/151749) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=94a0cd15f5976fa35e5e6784e621c04e9f958e57&end=e96bb7e44fbcc23c1e6009e8d0ee8ab208668fb4&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 0.4%  | [0.4%, 0.4%]   | 1     |
| Regressions ❌ <br /> (secondary)  | 0.1%  | [0.0%, 0.1%]   | 3     |
| Improvements ✅ <br /> (primary)   | -0.2% | [-0.4%, -0.1%] | 22    |
| Improvements ✅ <br /> (secondary) | -0.5% | [-1.9%, -0.1%] | 53    |
| All ❌✅ (primary)                 | -0.2% | [-0.4%, 0.4%]  | 23    |

This is essentially an improvement, the regressions look spurious. The
improvements appear to be due to
[#151711](https://github.com/rust-lang/rust/pull/151711) which updated stdarch.
Why that caused improvements is unclear at this time.

Update to LLVM 22 [#150722](https://github.com/rust-lang/rust/pull/150722) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=e96bb7e44fbcc23c1e6009e8d0ee8ab208668fb4&end=466ea4e6c39f8a43727edcc726ca86b499e14d83&stat=instructions:u)

| (instructions:u)                   | mean  | range           | count |
|:----------------------------------:|:-----:|:---------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 3.2%  | [0.9%, 7.4%]    | 3     |
| Regressions ❌ <br /> (secondary)  | 2.3%  | [0.4%, 6.0%]    | 3     |
| Improvements ✅ <br /> (primary)   | -0.7% | [-2.8%, -0.2%]  | 238   |
| Improvements ✅ <br /> (secondary) | -0.9% | [-10.1%, -0.1%] | 299   |
| All ❌✅ (primary)                 | -0.6% | [-2.8%, 7.4%]   | 241   |

Lots of affected benchmarks (as normal), but overall a positive LLVM update by
instruction counts. As nnethercote@ notes, the cycle counts are a little red
([comment](https://github.com/rust-lang/rust/pull/150722#issuecomment-3814373587))
as we've seen before with LLVM updates.

Tweak `SlicePartialEq` to allow MIR-inlining the `compare_bytes` call [#150945](https://github.com/rust-lang/rust/pull/150945) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=a234ae6b6538d41de6886cb7742d062ad832b0e3&end=1e5065a4d99e0e3ccf1a1719055308e7a20e8f36&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 0.4%  | [0.3%, 0.6%]   | 6     |
| Regressions ❌ <br /> (secondary)  | 0.7%  | [0.7%, 0.7%]   | 1     |
| Improvements ✅ <br /> (primary)   | -0.9% | [-2.3%, -0.1%] | 7     |
| Improvements ✅ <br /> (secondary) | -2.3% | [-2.3%, -2.3%] | 1     |
| All ❌✅ (primary)                 | -0.3% | [-2.3%, 0.6%]  | 13    |

Expected mixed results from an inlining change. Overall positive.

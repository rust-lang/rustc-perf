# 2025-12-22 Triage Log

Very quiet week, with essentially no change in performance.

Triage done by **@simulacrum**.
Revision range: [21ff67df..e1212ea7](https://perf.rust-lang.org/?start=21ff67df15329dd7548ccba54b6c6ae9a562124f&end=e1212ea79b38d51954625291c04d2797c4bb8ec5&absolute=false&stat=instructions%3Au)

**Summary**:

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 0.6%  | [0.1%, 1.9%]   | 61    |
| Regressions ❌ <br /> (secondary)  | 0.4%  | [0.1%, 1.0%]   | 73    |
| Improvements ✅ <br /> (primary)   | -0.6% | [-4.0%, -0.1%] | 23    |
| Improvements ✅ <br /> (secondary) | -0.6% | [-2.1%, -0.1%] | 24    |
| All ❌✅ (primary)                 | 0.2%  | [-4.0%, 1.9%]  | 84    |

1 Regression, 1 Improvement, 3 Mixed; 2 of them in rollups
36 artifact comparisons made in total

#### Regressions

Rollup of 4 pull requests [#150190](https://github.com/rust-lang/rust/pull/150190) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=d0835adc4e114eac911150b3692b830b5583223a&end=b53da9908134f77da3bb36e7009ac81f02ee48dc&stat=instructions:u)

| (instructions:u)                   | mean | range        | count |
|:----------------------------------:|:----:|:------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 0.7% | [0.2%, 1.8%] | 13    |
| Regressions ❌ <br /> (secondary)  | 0.4% | [0.2%, 0.8%] | 4     |
| Improvements ✅ <br /> (primary)   | -    | -            | 0     |
| Improvements ✅ <br /> (secondary) | -    | -            | 0     |
| All ❌✅ (primary)                 | 0.7% | [0.2%, 1.8%] | 13    |

Caused by [#150172](https://github.com/rust-lang/rust/pull/150172) which fixes a regression in docs.

#### Improvements

Perf regression fix [#150056](https://github.com/rust-lang/rust/pull/150056) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=b889870082dd0b0e3594bbfbebb4545d54710829&end=806c2a35dcc1db7867864fea0a7a65554a5238b7&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | -     | -              | 0     |
| Regressions ❌ <br /> (secondary)  | -     | -              | 0     |
| Improvements ✅ <br /> (primary)   | -0.2% | [-0.3%, -0.2%] | 18    |
| Improvements ✅ <br /> (secondary) | -0.3% | [-0.4%, -0.1%] | 12    |
| All ❌✅ (primary)                 | -0.2% | [-0.3%, -0.2%] | 18    |


#### Mixed

Rollup of 4 pull requests [#150079](https://github.com/rust-lang/rust/pull/150079) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=2dc30247c5d8293aaa31e1d7dae2ed2fde908ada&end=ec6f62244c3a019e2224b779d2b606721cabf8f2&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 0.2%  | [0.2%, 0.2%]   | 1     |
| Regressions ❌ <br /> (secondary)  | 0.2%  | [0.1%, 0.3%]   | 3     |
| Improvements ✅ <br /> (primary)   | -0.2% | [-0.2%, -0.2%] | 1     |
| Improvements ✅ <br /> (secondary) | -     | -              | 0     |
| All ❌✅ (primary)                 | 0.0%  | [-0.2%, 0.2%]  | 2     |

Continued small regressions from attribute parsing rework, per comment on the PR. Seems acceptable.

Don't treat asserts as a call in cross-crate inlining [#117192](https://github.com/rust-lang/rust/pull/117192) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=526a91cbcc4601b92b0587405015e07b9c0d79f6&end=07a5b02a2dfa2f1d7fc51b0133d545afc13849dd&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 0.7%  | [0.4%, 0.8%]   | 4     |
| Regressions ❌ <br /> (secondary)  | 0.2%  | [0.2%, 0.2%]   | 6     |
| Improvements ✅ <br /> (primary)   | -0.9% | [-0.9%, -0.9%] | 1     |
| Improvements ✅ <br /> (secondary) | -     | -              | 0     |
| All ❌✅ (primary)                 | 0.4%  | [-0.9%, 0.8%]  | 5     |

Inlining heuristic tweak is expected to cause semi-random changes, though
fairly limited in scope this time. I don't think there's much of interest here.

Replace Rvalue::NullaryOp by a variant in mir::Operand. [#148766](https://github.com/rust-lang/rust/pull/148766) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=acfd264f4df23b15cf27a15a85f76ed61977b48a&end=000ccd651d6dfeab13f7703d92a5fd7a9ff7510f&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 0.5%  | [0.1%, 1.4%]   | 33    |
| Regressions ❌ <br /> (secondary)  | 0.3%  | [0.1%, 0.6%]   | 19    |
| Improvements ✅ <br /> (primary)   | -1.1% | [-4.1%, -0.2%] | 12    |
| Improvements ✅ <br /> (secondary) | -0.7% | [-1.8%, -0.0%] | 13    |
| All ❌✅ (primary)                 | 0.1%  | [-4.1%, 1.4%]  | 45    |

This ends up tweaking inline thresholds so mixed results are expected. No
meaningful delta overall though (near-neutral in aggregate) so marking triaged.

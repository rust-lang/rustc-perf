# 2025-12-03 Triage Log

A fairly quiet week overall, despite a slightly higher than usual amount of merged PRs.

Triage done by **@simulacrum**.
Revision range: [b64df9d1..eca9d93f](https://perf.rust-lang.org/?start=b64df9d1012f2482b54a4d959548cf8fc67e820c&end=eca9d93f9057f9a48ff691bd65e7daf2f94c1b67&absolute=false&stat=instructions%3Au)

**Summary**:

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 0.5%  | [0.2%, 1.0%]   | 152   |
| Regressions ❌ <br /> (secondary)  | 0.7%  | [0.1%, 2.4%]   | 98    |
| Improvements ✅ <br /> (primary)   | -0.3% | [-1.3%, -0.1%] | 23    |
| Improvements ✅ <br /> (secondary) | -0.3% | [-1.1%, -0.1%] | 53    |
| All ❌✅ (primary)                 | 0.4%  | [-1.3%, 1.0%]  | 175   |

3 Regressions, 1 Improvement, 4 Mixed; 3 of them in rollups
43 artifact comparisons made in total

#### Regressions

Rollup of 12 pull requests [#149351](https://github.com/rust-lang/rust/pull/149351) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=c797096598b80ba4a40397ad7e91584fcd3df5f1&end=99ca3fc4ec35e11d1f034143e8d8f0b79ef4c1d7&stat=instructions:u)

| (instructions:u)                   | mean | range        | count |
|:----------------------------------:|:----:|:------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 0.1% | [0.1%, 0.1%] | 1     |
| Regressions ❌ <br /> (secondary)  | 0.8% | [0.3%, 1.3%] | 8     |
| Improvements ✅ <br /> (primary)   | -    | -            | 0     |
| Improvements ✅ <br /> (secondary) | -    | -            | 0     |
| All ❌✅ (primary)                 | 0.1% | [0.1%, 0.1%] | 1     |

This regressed due to [#147936](https://github.com/rust-lang/rust/pull/147936#issuecomment-3583927293)
which added intrinsics for offload on the large-workspace benchmark. It's not
clear why this had such a large effect though.

Rollup of 6 pull requests [#149387](https://github.com/rust-lang/rust/pull/149387) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=cf8a95590a1b768b7711f2631d5b5e3ead464de7&end=f392ed53ca3884c96430f2a283ffffa836b204f5&stat=instructions:u)

| (instructions:u)                   | mean | range        | count |
|:----------------------------------:|:----:|:------------:|:-----:|
| Regressions ❌ <br /> (primary)    | -    | -            | 0     |
| Regressions ❌ <br /> (secondary)  | 1.7% | [0.1%, 2.6%] | 4     |
| Improvements ✅ <br /> (primary)   | -    | -            | 0     |
| Improvements ✅ <br /> (secondary) | -    | -            | 0     |
| All ❌✅ (primary)                 | -    | -            | 0     |

This regressed some next-solver benchmarks. Root cause not investigated but surface level inspection suggests this is a bug fix so probably warranted, marked as triaged.

Rollup of 3 pull requests [#149462](https://github.com/rust-lang/rust/pull/149462) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=8a3a6bdb68b4d4c9ed922840808b02015741331e&end=3ff30e7eafc1da7104c3960187d17939172428ed&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 0.5%  | [0.1%, 1.0%]   | 160   |
| Regressions ❌ <br /> (secondary)  | 0.6%  | [0.1%, 2.0%]   | 82    |
| Improvements ✅ <br /> (primary)   | -     | -              | 0     |
| Improvements ✅ <br /> (secondary) | -0.5% | [-0.5%, -0.5%] | 1     |
| All ❌✅ (primary)                 | 0.5%  | [0.1%, 1.0%]   | 160   |

This is due to ongoing work to support open APIs, see [comment](https://github.com/rust-lang/rust/pull/149462#issuecomment-3592715205) with analysis.

#### Improvements

Remove context dependant `!` fallback [#148871](https://github.com/rust-lang/rust/pull/148871) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=88bd39beb342e2ae7ded1eb7d58697416686d679&end=d645a4c9c563b80048ce5f32845e754a67f11efa&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | -     | -              | 0     |
| Regressions ❌ <br /> (secondary)  | -     | -              | 0     |
| Improvements ✅ <br /> (primary)   | -0.3% | [-0.4%, -0.1%] | 38    |
| Improvements ✅ <br /> (secondary) | -0.3% | [-0.5%, -0.1%] | 40    |
| All ❌✅ (primary)                 | -0.3% | [-0.4%, -0.1%] | 38    |


#### Mixed

v0 mangling for std on nightly [#149148](https://github.com/rust-lang/rust/pull/149148) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=cdb4236e654a49c3035269588fe22dfafc0cfa3a&end=7934bbdf84a6b9a30297caf4f4f38286dedf876a&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 0.8%  | [0.6%, 0.8%]   | 5     |
| Regressions ❌ <br /> (secondary)  | 0.5%  | [0.0%, 0.9%]   | 23    |
| Improvements ✅ <br /> (primary)   | -     | -              | 0     |
| Improvements ✅ <br /> (secondary) | -0.3% | [-1.1%, -0.1%] | 5     |
| All ❌✅ (primary)                 | 0.8%  | [0.6%, 0.8%]   | 5     |

Expected regressions due to binary size increases, see [comment](https://github.com/rust-lang/rust/pull/149148#issuecomment-3576262278).

Fix issue with callsite inline attribute not being applied sometimes. [#147404](https://github.com/rust-lang/rust/pull/147404) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=cc3eee7fbe17ea4b7238531cb97e1b7b8bd6afce&end=1eb0657f78777f0b4d6bcc49c126d5d35212cae5&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 0.4%  | [0.3%, 0.4%]   | 2     |
| Regressions ❌ <br /> (secondary)  | 0.2%  | [0.1%, 0.3%]   | 5     |
| Improvements ✅ <br /> (primary)   | -0.1% | [-0.1%, -0.1%] | 2     |
| Improvements ✅ <br /> (secondary) | -0.2% | [-0.4%, -0.1%] | 22    |
| All ❌✅ (primary)                 | 0.1%  | [-0.1%, 0.4%]  | 4     |

Mixed results. Arguably a correctness fix, so marking as triaged. Regressions
are due to doing a bit more work in codegen.

Compute jump threading opportunities in a single pass [#142821](https://github.com/rust-lang/rust/pull/142821) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=1d60f9e070c1039b263e0f035c0f03dfcc610d0f&end=4ad239f4156aa4e7df5ac9eb90ff0ab3d0089d1c&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 0.4%  | [0.1%, 0.8%]   | 18    |
| Regressions ❌ <br /> (secondary)  | 0.2%  | [0.1%, 1.0%]   | 19    |
| Improvements ✅ <br /> (primary)   | -0.7% | [-1.4%, -0.3%] | 8     |
| Improvements ✅ <br /> (secondary) | -0.3% | [-0.8%, -0.1%] | 27    |
| All ❌✅ (primary)                 | 0.1%  | [-1.4%, 0.8%]  | 26    |

Mixed results as expected from MIR opt changes. Generally only a slight
regression and the PR has other benefits (simplification of code and what looks
like binary size wins).

Move even more early buffered lints to dyn lint diagnostics [#147634](https://github.com/rust-lang/rust/pull/147634) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=63b1db05801271e400954e41b8600a3cf1482363&end=47cd7120d9b4e1b64eb27c87522a07888197fae8&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | -     | -              | 0     |
| Regressions ❌ <br /> (secondary)  | 0.2%  | [0.2%, 0.2%]   | 1     |
| Improvements ✅ <br /> (primary)   | -     | -              | 0     |
| Improvements ✅ <br /> (secondary) | -0.5% | [-0.9%, -0.1%] | 13    |
| All ❌✅ (primary)                 | -     | -              | 0     |

Only a single secondary run regressed (ucd) so while it doesn't look spurious I
don't think it merits investigation, especially coupled with some improvements.
Marking as triaged.

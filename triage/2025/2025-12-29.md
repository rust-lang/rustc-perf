# 2025-12-29 Triage Log

Not a lot of changes this week. Overall result is positive, largely thanks to https://github.com/rust-lang/rust/pull/142881, which makes computing an expensive data structure for JumpThreading MIR optimization lazy.

Triage done by **@panstromek**.
Revision range: [e1212ea7..112a2742](https://perf.rust-lang.org/?start=e1212ea79b38d51954625291c04d2797c4bb8ec5&end=112a274275d77ebc2b892f056a1e2fad141f4f08&absolute=false&stat=instructions%3Au)

**Summary**:

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 0.5%  | [0.1%, 1.7%]   | 11    |
| Regressions ❌ <br /> (secondary)  | 0.2%  | [0.1%, 0.5%]   | 6     |
| Improvements ✅ <br /> (primary)   | -0.5% | [-1.3%, -0.1%] | 74    |
| Improvements ✅ <br /> (secondary) | -0.6% | [-1.8%, -0.2%] | 71    |
| All ❌✅ (primary)                 | -0.4% | [-1.3%, 1.7%]  | 85    |


2 Regressions, 0 Improvements, 3 Mixed; 1 of them in rollups
37 artifact comparisons made in total

#### Regressions

Add `MaybeDangling` to `core` [#149775](https://github.com/rust-lang/rust/pull/149775) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=c7aa99f36ccad2c127edec5be493cab0b152f436&end=08509492139968a96a005ba811a995e2f1d6a2ac&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 0.3%  | [0.1%, 0.6%]   | 9     |
| Regressions ❌ <br /> (secondary)  | 0.2%  | [0.1%, 0.5%]   | 7     |
| Improvements ✅ <br /> (primary)   | -0.3% | [-0.3%, -0.3%] | 1     |
| Improvements ✅ <br /> (secondary) | -     | -              | 0     |
| All ❌✅ (primary)                 | 0.2%  | [-0.3%, 0.6%]  | 10    |

Incremental regressions look real, the other ones might be noise. Asked on the PR whether this is expected.

Rollup of 8 pull requests [#150469](https://github.com/rust-lang/rust/pull/150469) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=21cf7fb3ff9159b0b562431312969dd548ae8782&end=7fefa09b90ca57b8a0e0e4717d672d38a0ae58b5&stat=instructions:u)

| (instructions:u)                   | mean | range        | count |
|:----------------------------------:|:----:|:------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 0.1% | [0.1%, 0.2%] | 3     |
| Regressions ❌ <br /> (secondary)  | 0.2% | [0.1%, 0.3%] | 12    |
| Improvements ✅ <br /> (primary)   | -    | -            | 0     |
| Improvements ✅ <br /> (secondary) | -    | -            | 0     |
| All ❌✅ (primary)                 | 0.1% | [0.1%, 0.2%] | 3     |

Caused by https://github.com/rust-lang/rust/pull/148321, already triaged by @JonathanBrouwer

#### Improvements



#### Mixed

rustdoc: upgrade to stringdex 0.0.4 [#150217](https://github.com/rust-lang/rust/pull/150217) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=4f14395c37db4c1be874e6b0ace6721674223c22&end=a0c97e3255e2b9140f131baec1c93eef57640d21&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | -     | -              | 0     |
| Regressions ❌ <br /> (secondary)  | 0.2%  | [0.2%, 0.2%]   | 1     |
| Improvements ✅ <br /> (primary)   | -0.5% | [-0.7%, -0.3%] | 2     |
| Improvements ✅ <br /> (secondary) | -1.0% | [-1.0%, -1.0%] | 1     |
| All ❌✅ (primary)                 | -0.5% | [-0.7%, -0.3%] | 2     |

Regression is noise, triaged by @Kobzol

MGCA: Support struct expressions without intermediary anon consts [#149114](https://github.com/rust-lang/rust/pull/149114) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=2ca7bcd03b87b52f7055a59b817443b0ac4a530d&end=8796b3b8b4ac6f38a80bf80ce89dd7bd7f92edd7&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 0.2%  | [0.2%, 0.3%]   | 7     |
| Regressions ❌ <br /> (secondary)  | -     | -              | 0     |
| Improvements ✅ <br /> (primary)   | -0.1% | [-0.1%, -0.1%] | 1     |
| Improvements ✅ <br /> (secondary) | -0.3% | [-0.7%, -0.1%] | 19    |
| All ❌✅ (primary)                 | 0.2%  | [-0.1%, 0.3%]  | 8     |

Regression is expected, matches pre-merge results, should be addressed by followup work, IIUC from the PR description.

JumpThreading: compute place and value indices on-demand [#142881](https://github.com/rust-lang/rust/pull/142881) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=38ed7700e7ba3adb7af96e3dcb2ba6dfa3a0c951&end=c7aa99f36ccad2c127edec5be493cab0b152f436&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 1.4%  | [1.4%, 1.4%]   | 1     |
| Regressions ❌ <br /> (secondary)  | -     | -              | 0     |
| Improvements ✅ <br /> (primary)   | -0.4% | [-1.4%, -0.2%] | 117   |
| Improvements ✅ <br /> (secondary) | -0.5% | [-1.9%, -0.1%] | 93    |
| All ❌✅ (primary)                 | -0.4% | [-1.4%, 1.4%]  | 118   |

Already triaged by @lqd: "Improvements in icounts heavily outweigh the one regression (which is also a proc-macro in an opt scenario: not a default cargo config)"
